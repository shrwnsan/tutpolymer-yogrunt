<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer-jsonp/polymer-jsonp.html">
<link rel="import" href="../../bower_components/flatiron-director/flatiron-director.html">
<link rel="import" href="../my-post/my-post.html">

<polymer-element name="my-blog" attributes="">
  <template>
    <link rel="stylesheet" href="my-blog.css">

    <div class="row">
      <h1><a href="/#">My Polymer Blog</a></h1>

      <flatiron-director route="{{route}}" autoHash></flatiron-director>

      <h2>Posts</h2>

      <!-- Table of contents -->
      <ul>
        <template repeat="{{post in posts.feed.entry}}">
        <li><a href="#{{post.gsx$slug.$t}}">{{post.gsx$title.$t}}</a></li>
        </template>
      </ul>

      <!-- Post content -->
      <template repeat="{{post in posts.feed.entry}}">
        <my-post post="{{post}}" selected="{{route}}"></my-post>
      </template>
    </div>

    <polymer-jsonp auto url="https://spreadsheets.google.com/feeds/list/0AuUp8NDsrQVjdEM5WWVkMlhSN3d4N2VmaTdqZVFld2c/od6/public/values?alt=json-in-script&callback=" response="{{posts}}"></polymer-jsonp>

  </template>
  <script>
    (function () {
      'use strict';

      Polymer('my-blog', {
        //applyAuthorStyles: true,
        //resetStyleInheritance: true,
        created: function() { },
        enteredView: function() { },
        leftView: function() { },
        attributeChanged: function(attrName, oldVal, newVal) { }
      });

    })();
  </script>
</polymer-element>
